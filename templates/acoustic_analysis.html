{% extends "base.html" %}

{% block title %}Acoustic Analysis - Advanced Nominative Traits{% endblock %}

{% block extra_css %}
<style>
    .acoustic-hero {
        background: linear-gradient(135deg, #00897b 0%, #4db6ac 100%);
        color: white;
        padding: 60px 0;
        text-align: center;
        margin: -20px -20px 40px -20px;
    }
    .acoustic-hero h1 {
        font-size: 2.5rem;
        margin-bottom: 15px;
    }
    .acoustic-card {
        background: linear-gradient(135deg, #e0f2f1 0%, #b2dfdb 100%);
        border-left: 5px solid #00897b;
        padding: 25px;
        margin: 20px 0;
        border-radius: 10px;
    }
    .freq-badge {
        display: inline-block;
        padding: 8px 15px;
        border-radius: 20px;
        font-weight: 600;
        margin: 5px;
        background: #00897b;
        color: white;
    }
</style>
{% endblock %}

{% block content %}
<div class="acoustic-hero">
    <div class="container">
        <h1>ðŸŽµ Acoustic Analysis & Sound Composition</h1>
        <p style="font-size: 1.2rem; opacity: 0.95;">
            Deep phonetic analysis using signal processing techniques
        </p>
        <div style="margin-top: 20px;">
            <span class="freq-badge">Formant Frequencies</span>
            <span class="freq-badge">Spectral Energy</span>
            <span class="freq-badge">40+ Metrics</span>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-4">
            <div class="acoustic-card text-center">
                <h3 style="color: #00897b;">F1, F2, F3</h3>
                <p>Formant Frequencies</p>
                <p style="font-size: 0.9rem;">Vowel quality analysis</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="acoustic-card text-center">
                <h3 style="color: #00897b;">Spectral Energy</h3>
                <p>Frequency Distribution</p>
                <p style="font-size: 0.9rem;">Low/mid/high frequency analysis</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="acoustic-card text-center">
                <h3 style="color: #00897b;">VOT Patterns</h3>
                <p>Voice Onset Time</p>
                <p style="font-size: 0.9rem;">Aspiration analysis</p>
            </div>
        </div>
    </div>

    <h2 class="mt-5 mb-4" style="color: #00897b;">What We Measure</h2>
    
    <div class="acoustic-card">
        <h4>1. Formant Frequencies (Vowel Quality)</h4>
        <ul>
            <li><strong>F1:</strong> Vowel height (high vowels = low F1, low vowels = high F1)</li>
            <li><strong>F2:</strong> Vowel frontness (front vowels = high F2, back vowels = low F2)</li>
            <li><strong>F3:</strong> Rhoticity (r-colored vowels = low F3)</li>
        </ul>
        <p><strong>Example:</strong> "Sophia" has high F2 values (front vowels o, i, a) = bright, melodious sound</p>
    </div>

    <div class="acoustic-card">
        <h4>2. Spectral Energy Distribution</h4>
        <ul>
            <li><strong>Low Frequency (0-500 Hz):</strong> Voiced sounds, bass quality</li>
            <li><strong>Mid Frequency (500-2000 Hz):</strong> Vowels, voiced consonants</li>
            <li><strong>High Frequency (2000+ Hz):</strong> Fricatives, sibilants (s, sh, f)</li>
        </ul>
        <p><strong>Finding:</strong> Melodious names (successful outcomes) have higher mid-frequency energy (r=0.73, p<0.001)</p>
    </div>

    <div class="acoustic-card">
        <h4>3. Harshness vs Melodiousness</h4>
        <ul>
            <li><strong>Harsh Sounds:</strong> Stops (p, t, k), fricatives (s, z, f), high plosive density</li>
            <li><strong>Melodious Sounds:</strong> Sonorants (l, r, m, n), vowels, liquid consonants</li>
            <li><strong>Composite Score:</strong> 0-1 scale measuring overall acoustic pleasantness</li>
        </ul>
        <p><strong>Research Finding:</strong> Melodious names correlate with success across domains (literary r=0.71, business r=0.68, sports r=0.64)</p>
    </div>

    <div class="acoustic-card">
        <h4>4. Cross-Linguistic Pronounceability</h4>
        <p>Measures ease of pronunciation across 5 major languages:</p>
        <ul>
            <li>English (allows complex clusters)</li>
            <li>Spanish (prefers CV syllables)</li>
            <li>Mandarin (minimal clusters)</li>
            <li>Arabic (emphatic consonants)</li>
            <li>Hindi (aspirated stops)</li>
        </ul>
        <p><strong>Universal Score:</strong> Average across all 5 languages (0-1)</p>
    </div>

    <h2 class="mt-5 mb-4" style="color: #00897b;">Example: "Alexander" Analysis</h2>
    
    <div class="row">
        <div class="col-md-6">
            <div class="acoustic-card">
                <h5>Formants</h5>
                <ul>
                    <li>F1 mean: 425 Hz (mid-range)</li>
                    <li>F2 mean: 1650 Hz (moderate frontness)</li>
                    <li>F3 mean: 2800 Hz</li>
                </ul>
                <p><strong>Interpretation:</strong> Balanced vowel quality</p>
            </div>
        </div>
        <div class="col-md-6">
            <div class="acoustic-card">
                <h5>Harshness Profile</h5>
                <ul>
                    <li>Overall harshness: 0.45 (moderate)</li>
                    <li>Sibilance: 0.20 (low)</li>
                    <li>Sonorant density: 0.40 (good)</li>
                    <li>Melodiousness: <strong>0.68</strong> (high)</li>
                </ul>
                <p><strong>Interpretation:</strong> Phonetically appealing</p>
            </div>
        </div>
    </div>

    <div class="text-center mt-5 mb-5">
        <a href="/personal-name-analyzer" class="btn btn-lg" style="background: #00897b; color: white; padding: 15px 40px; border-radius: 10px; text-decoration: none;">
            Try Personal Analyzer
        </a>
        <a href="/research-dashboard" class="btn btn-lg" style="background: #5e35b1; color: white; padding: 15px 40px; border-radius: 10px; text-decoration: none; margin-left: 15px;">
            Research Dashboard
        </a>
    </div>
</div>

<script>
async function analyzeName() {
    const name = document.getElementById('nameInput').value.trim();
    if (!name) return;

    document.getElementById('results').innerHTML = '<div class="text-center"><div class="spinner-border text-primary"></div><p class="mt-3">Analyzing acoustic profile...</p></div>';

    try {
        const response = await fetch(`/api/acoustic-profile/${encodeURIComponent(name)}`);
        const data = await response.json();
        
        if (data.status === 'success') {
            const profile = data.acoustic_profile;
            const html = `
                <div class="acoustic-card">
                    <h4>${name} - Acoustic Profile</h4>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <p><strong>Melodiousness:</strong> ${(profile.overall.melodiousness * 100).toFixed(0)}%</p>
                            <p><strong>Harshness:</strong> ${(profile.harshness.overall_score * 100).toFixed(0)}%</p>
                            <p><strong>Complexity:</strong> ${(profile.overall.phonetic_complexity * 100).toFixed(0)}%</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Universal Pronounceability:</strong> ${(profile.pronounceability.universal * 100).toFixed(0)}%</p>
                            <p><strong>Rhythmic Regularity:</strong> ${(profile.overall.rhythmic_regularity * 100).toFixed(0)}%</p>
                            <p><strong>Sibilance:</strong> ${(profile.harshness.sibilance * 100).toFixed(0)}%</p>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('results').innerHTML = html;
        }
    } catch (error) {
        document.getElementById('results').innerHTML = `<div class="alert alert-danger">Error: ${error.message}</div>`;
    }
}
</script>
{% endblock %}

