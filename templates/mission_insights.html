{% extends "base.html" %}

{% block title %}Mission Insights Dashboard{% endblock %}

{% block content %}
<h1>Mission Insights Dashboard</h1>
<p class="subtitle">Comprehensive multi-method statistical analysis | Generated 2025-11-02</p>

<!-- Executive Summary -->
<div class="glass card mb-1" style="border-left: 4px solid var(--accent-primary);">
    <h3>üìä Executive Summary</h3>
    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1rem;">
        <div style="text-align: center; padding: 1rem; background: var(--background-secondary); border-radius: 6px; border-left: 3px solid var(--accent-primary);">
            <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.4rem;">SAMPLE SIZE</div>
            <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-primary);">2,740</div>
        </div>
        <div style="text-align: center; padding: 1rem; background: var(--background-secondary); border-radius: 6px; border-left: 3px solid var(--success-muted);">
            <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.4rem;">CLUSTER QUALITY</div>
            <div style="font-size: 2.5rem; font-weight: 700; color: var(--success-muted);">0.401</div>
            <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 0.2rem;">Good</div>
        </div>
        <div style="text-align: center; padding: 1rem; background: var(--background-secondary); border-radius: 6px; border-left: 3px solid #e0a55a;">
            <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.4rem;">CORRELATION</div>
            <div style="font-size: 2.5rem; font-weight: 700; color: #e0a55a;">0.015</div>
            <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 0.2rem;">Linguistic ‚Üî Performance</div>
        </div>
        <div style="text-align: center; padding: 1rem; background: var(--background-secondary); border-radius: 6px; border-left: 3px solid #a07cc5;">
            <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.4rem;">WINNING ADVANTAGE</div>
            <div style="font-size: 2.5rem; font-weight: 700; color: #a07cc5;">+17.6%</div>
            <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 0.2rem;">Cluster 0 vs Cluster 1</div>
        </div>
    </div>
    <div style="padding: 1rem; background: rgba(74, 196, 158, 0.05); border-radius: 6px; border-left: 3px solid var(--success-muted);">
        <strong style="color: var(--success-muted);">‚úì Primary Finding:</strong> 
        <span style="font-size: 0.9rem; color: var(--text-secondary);">
            Cluster analysis identifies 2 distinct linguistic patterns. High-memorability cohort (Cluster 0) outperforms by +17.6% 
            (avg 37.6% vs 20.0%). Key differentiators: memorability (88.8 vs 43.2), pronounceability (42.3 vs 6.7).
        </span>
    </div>
</div>

<!-- Detailed Cluster Comparison -->
<div class="glass card mb-1">
    <h3>üî¨ Cluster Comparison Matrix</h3>
    <p class="text-muted mb-1" style="font-size: 0.85rem;">Side-by-side comparison of linguistic archetypes discovered through unsupervised clustering</p>
    <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
            <thead>
                <tr style="background: var(--background-secondary); border-bottom: 2px solid var(--accent-primary);">
                    <th style="padding: 0.75rem; text-align: left;">Metric</th>
                    <th style="padding: 0.75rem; text-align: right;">Cluster 0 (Winner)</th>
                    <th style="padding: 0.75rem; text-align: right;">Cluster 1</th>
                    <th style="padding: 0.75rem; text-align: right;">Difference</th>
                </tr>
            </thead>
            <tbody>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.05); background: rgba(74, 196, 158, 0.05);">
                    <td style="padding: 0.6rem; font-weight: 700;">Avg Return (1Y)</td>
                    <td style="padding: 0.6rem; text-align: right; font-weight: 700;">+37.62%</td>
                    <td style="padding: 0.6rem; text-align: right;">+19.98%</td>
                    <td style="padding: 0.6rem; text-align: right; color: var(--success-muted); font-weight: 700;">+17.64%</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                    <td style="padding: 0.6rem;">Win Rate</td>
                    <td style="padding: 0.6rem; text-align: right; font-weight: 700;">16.7%</td>
                    <td style="padding: 0.6rem; text-align: right;">21.1%</td>
                    <td style="padding: 0.6rem; text-align: right; color: #e07c5a; font-weight: 700;">-4.40%</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                    <td style="padding: 0.6rem;">Asset Count</td>
                    <td style="padding: 0.6rem; text-align: right; font-weight: 700;">1,493</td>
                    <td style="padding: 0.6rem; text-align: right;">1,247</td>
                    <td style="padding: 0.6rem; text-align: right; color: var(--success-muted); font-weight: 700;">+246</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                    <td style="padding: 0.6rem;">Avg Length (chars)</td>
                    <td style="padding: 0.6rem; text-align: right; font-weight: 700;">6.64</td>
                    <td style="padding: 0.6rem; text-align: right;">16.63</td>
                    <td style="padding: 0.6rem; text-align: right; color: var(--success-muted); font-weight: 700;">-9.99</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                    <td style="padding: 0.6rem;">Syllables</td>
                    <td style="padding: 0.6rem; text-align: right; font-weight: 700;">1.75</td>
                    <td style="padding: 0.6rem; text-align: right;">3.76</td>
                    <td style="padding: 0.6rem; text-align: right; color: var(--success-muted); font-weight: 700;">-2.01</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                    <td style="padding: 0.6rem;">Memorability</td>
                    <td style="padding: 0.6rem; text-align: right; font-weight: 700;">88.80</td>
                    <td style="padding: 0.6rem; text-align: right;">43.15</td>
                    <td style="padding: 0.6rem; text-align: right; color: var(--success-muted); font-weight: 700;">+45.65</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                    <td style="padding: 0.6rem;">Pronounceability</td>
                    <td style="padding: 0.6rem; text-align: right; font-weight: 700;">42.28</td>
                    <td style="padding: 0.6rem; text-align: right;">6.70</td>
                    <td style="padding: 0.6rem; text-align: right; color: var(--success-muted); font-weight: 700;">+35.58</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                    <td style="padding: 0.6rem;">Phonetic Score</td>
                    <td style="padding: 0.6rem; text-align: right; font-weight: 700;">84.69</td>
                    <td style="padding: 0.6rem; text-align: right;">51.06</td>
                    <td style="padding: 0.6rem; text-align: right; color: var(--success-muted); font-weight: 700;">+33.63</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                    <td style="padding: 0.6rem;">Vowel Ratio</td>
                    <td style="padding: 0.6rem; text-align: right; font-weight: 700;">0.42</td>
                    <td style="padding: 0.6rem; text-align: right;">0.34</td>
                    <td style="padding: 0.6rem; text-align: right; color: var(--success-muted); font-weight: 700;">+0.08</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Correlation Heatmap -->
<div class="glass card mb-1">
    <h3>üìà Feature Correlation Matrix</h3>
    <p class="text-muted mb-1" style="font-size: 0.85rem;">Pearson correlation coefficients between linguistic features and 1-year performance (n=1,547)</p>
    <div style="font-size: 0.85rem;">
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.6rem; background: linear-gradient(90deg, transparent, rgba(74, 124, 158, 0.09)); border-radius: 4px; margin-bottom: 0.5rem;">
            <span>has numbers</span>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="font-weight: 700; color: var(--success-muted);">+0.046</span>
                <span style="font-size: 0.75rem; color: var(--text-muted);">p=0.0705</span>
            </div>
        </div>
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.6rem; background: linear-gradient(90deg, transparent, rgba(224, 124, 90, 0.08)); border-radius: 4px; margin-bottom: 0.5rem;">
            <span>syllable count</span>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="font-weight: 700; color: #e07c5a;">-0.042</span>
                <span style="font-size: 0.75rem; color: var(--text-muted);">p=0.0991</span>
            </div>
        </div>
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.6rem; background: linear-gradient(90deg, transparent, rgba(224, 124, 90, 0.07)); border-radius: 4px; margin-bottom: 0.5rem;">
            <span>character length</span>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="font-weight: 700; color: #e07c5a;">-0.037</span>
                <span style="font-size: 0.75rem; color: var(--text-muted);">p=0.1444</span>
            </div>
        </div>
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.6rem; background: linear-gradient(90deg, transparent, rgba(74, 124, 158, 0.04)); border-radius: 4px; margin-bottom: 0.5rem;">
            <span>pronounceability score</span>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="font-weight: 700; color: var(--success-muted);">+0.022</span>
                <span style="font-size: 0.75rem; color: var(--text-muted);">p=0.3965</span>
            </div>
        </div>
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.6rem; background: linear-gradient(90deg, transparent, rgba(224, 124, 90, 0.03)); border-radius: 4px; margin-bottom: 0.5rem;">
            <span>uniqueness score</span>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="font-weight: 700; color: #e07c5a;">-0.016</span>
                <span style="font-size: 0.75rem; color: var(--text-muted);">p=0.5211</span>
            </div>
        </div>
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.6rem; background: linear-gradient(90deg, transparent, rgba(74, 124, 158, 0.03)); border-radius: 4px; margin-bottom: 0.5rem;">
            <span>phonetic score</span>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="font-weight: 700; color: var(--success-muted);">+0.015</span>
                <span style="font-size: 0.75rem; color: var(--text-muted);">p=0.5658</span>
            </div>
        </div>
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.6rem; background: linear-gradient(90deg, transparent, rgba(74, 124, 158, 0.02)); border-radius: 4px; margin-bottom: 0.5rem;">
            <span>memorability score</span>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="font-weight: 700; color: var(--success-muted);">+0.012</span>
                <span style="font-size: 0.75rem; color: var(--text-muted);">p=0.6248</span>
            </div>
        </div>
    </div>
    <div style="margin-top: 0.75rem; padding: 0.75rem; background: rgba(224, 165, 90, 0.1); border-radius: 6px; border-left: 3px solid #e0a55a; font-size: 0.85rem;">
        <strong style="color: #e0a55a;">‚ö†Ô∏è Note:</strong> No correlations reached statistical significance (p<0.05). Linear relationships are weak.
    </div>
</div>

<!-- Feature Importance Deep Dive -->
<div class="glass card mb-1">
    <h3>üéØ Random Forest Feature Importance</h3>
    <p class="text-muted mb-1" style="font-size: 0.85rem;">Ensemble model identifies predictive features (in-sample R¬≤: 0.6519)</p>
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem;">
        <div>
            <div style="margin-bottom: 0.75rem;">
                <div style="display: flex; justify-content: space-between; font-size: 0.85rem; margin-bottom: 0.3rem;">
                    <span>uniqueness score</span>
                    <span style="font-weight: 700;">41.7%</span>
                </div>
                <div style="width: 100%; height: 1.5rem; background: var(--background-secondary); border-radius: 4px; overflow: hidden;">
                    <div style="width: 100%; height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--success-muted)); border-radius: 4px;"></div>
                </div>
            </div>
            <div style="margin-bottom: 0.75rem;">
                <div style="display: flex; justify-content: space-between; font-size: 0.85rem; margin-bottom: 0.3rem;">
                    <span>character length</span>
                    <span style="font-weight: 700;">31.0%</span>
                </div>
                <div style="width: 100%; height: 1.5rem; background: var(--background-secondary); border-radius: 4px; overflow: hidden;">
                    <div style="width: 74.3%; height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--success-muted)); border-radius: 4px;"></div>
                </div>
            </div>
            <div style="margin-bottom: 0.75rem;">
                <div style="display: flex; justify-content: space-between; font-size: 0.85rem; margin-bottom: 0.3rem;">
                    <span>phonetic score</span>
                    <span style="font-weight: 700;">11.8%</span>
                </div>
                <div style="width: 100%; height: 1.5rem; background: var(--background-secondary); border-radius: 4px; overflow: hidden;">
                    <div style="width: 28.3%; height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--success-muted)); border-radius: 4px;"></div>
                </div>
            </div>
            <div style="margin-bottom: 0.75rem;">
                <div style="display: flex; justify-content: space-between; font-size: 0.85rem; margin-bottom: 0.3rem;">
                    <span>memorability score</span>
                    <span style="font-weight: 700;">7.2%</span>
                </div>
                <div style="width: 100%; height: 1.5rem; background: var(--background-secondary); border-radius: 4px; overflow: hidden;">
                    <div style="width: 17.3%; height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--success-muted)); border-radius: 4px;"></div>
                </div>
            </div>
            <div style="margin-bottom: 0.75rem;">
                <div style="display: flex; justify-content: space-between; font-size: 0.85rem; margin-bottom: 0.3rem;">
                    <span>pronounceability score</span>
                    <span style="font-weight: 700;">4.6%</span>
                </div>
                <div style="width: 100%; height: 1.5rem; background: var(--background-secondary); border-radius: 4px; overflow: hidden;">
                    <div style="width: 11.0%; height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--success-muted)); border-radius: 4px;"></div>
                </div>
            </div>
        </div>
        <div>
            <h4 style="font-size: 0.95rem; color: var(--text-muted); margin-bottom: 0.75rem;">Top Features Interpretation</h4>
            <div style="font-size: 0.85rem; line-height: 1.7;">
                <div style="margin-bottom: 0.75rem;">
                    <strong>1. uniqueness score</strong> (41.7%): 
                    Dominant feature. High uniqueness differentiates in crowded markets.
                </div>
                <div style="margin-bottom: 0.75rem;">
                    <strong>2. character length</strong> (31.0%): 
                    Name length matters. Shorter names show condensed branding advantages.
                </div>
                <div style="margin-bottom: 0.75rem;">
                    <strong>3. phonetic score</strong> (11.8%): 
                    Phonetic quality influences memorability and word-of-mouth spread.
                </div>
                <div style="padding: 0.75rem; background: rgba(224, 165, 90, 0.05); border-radius: 4px; border-left: 2px solid #e0a55a; margin-top: 1rem;">
                    <strong style="color: #e0a55a;">Note:</strong> These are in-sample importances without cross-validation. 
                    Out-of-sample testing required before operational deployment.
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Causal Analysis Section -->
<div class="glass card mb-1">
    <h3>‚öóÔ∏è Causal Analysis Attempts</h3>
    <p class="text-muted mb-1" style="font-size: 0.85rem;">Propensity-weighted estimates for high linguistic cohorts</p>
    <div>
        <div style="padding: 1rem; background: var(--background-secondary); border-radius: 6px; margin-bottom: 0.75rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                <h4 style="font-size: 0.9rem; margin: 0;">High Memorability (>72)</h4>
                <span style="background: var(--text-muted); color: black; padding: 0.3rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">NON-SIG</span>
            </div>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; font-size: 0.8rem;">
                <div>
                    <div style="color: var(--text-muted); font-size: 0.7rem;">ATE</div>
                    <div style="font-weight: 700; font-size: 1.1rem;">-9.92%</div>
                </div>
                <div>
                    <div style="color: var(--text-muted); font-size: 0.7rem;">95% CI</div>
                    <div style="font-weight: 700; font-size: 1.1rem;">[-69.2, +45.3]</div>
                </div>
                <div>
                    <div style="color: var(--text-muted); font-size: 0.7rem;">INTERPRETATION</div>
                    <div style="font-size: 0.75rem;">Non-significant effect</div>
                </div>
            </div>
        </div>
        <div style="padding: 1rem; background: var(--background-secondary); border-radius: 6px; margin-bottom: 0.75rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                <h4 style="font-size: 0.9rem; margin: 0;">High Phonetic Score (>70)</h4>
                <span style="background: var(--text-muted); color: black; padding: 0.3rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">NON-SIG</span>
            </div>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; font-size: 0.8rem;">
                <div>
                    <div style="color: var(--text-muted); font-size: 0.7rem;">ATE</div>
                    <div style="font-weight: 700; font-size: 1.1rem;">+26.79%</div>
                </div>
                <div>
                    <div style="color: var(--text-muted); font-size: 0.7rem;">95% CI</div>
                    <div style="font-weight: 700; font-size: 1.1rem;">[-17.1, +84.4]</div>
                </div>
                <div>
                    <div style="color: var(--text-muted); font-size: 0.7rem;">INTERPRETATION</div>
                    <div style="font-size: 0.75rem;">Wide CI, non-significant</div>
                </div>
            </div>
        </div>
    </div>
    <div style="margin-top: 1rem; padding: 1rem; background: rgba(224, 165, 90, 0.1); border-radius: 6px; border-left: 3px solid #e0a55a;">
        <strong style="color: #e0a55a;">‚ö†Ô∏è Caution:</strong> 
        <span style="font-size: 0.85rem; color: var(--text-secondary);">
            Causal inference encountered perfect separation and singular matrices, indicating current feature sparsity.
            No clean causal uplift attributable solely to name traits. Treat as exploratory.
        </span>
    </div>
</div>

<!-- Methodological Notes -->
<div class="glass card">
    <h3>üìã Methodological Notes & Limitations</h3>
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
        <div>
            <h4 style="font-size: 0.95rem; color: var(--text-muted); margin-bottom: 0.5rem;">Methods Applied</h4>
            <ul style="font-size: 0.85rem; line-height: 1.7; margin: 0; padding-left: 1.2rem;">
                <li>Pearson & Spearman correlation analysis</li>
                <li>Linear regression & Random Forest ensemble</li>
                <li>K-means clustering (auto-K via silhouette)</li>
                <li>ANOVA for name category comparison</li>
                <li>Polynomial & threshold regression probes</li>
                <li>Propensity score weighted causal estimates</li>
            </ul>
        </div>
        <div>
            <h4 style="font-size: 0.95rem; color: var(--text-muted); margin-bottom: 0.5rem;">Known Limitations</h4>
            <ul style="font-size: 0.85rem; line-height: 1.7; margin: 0; padding-left: 1.2rem;">
                <li>Random Forest metrics are <strong>in-sample</strong> (no cross-validation)</li>
                <li>Heavy-tailed distributions inflate mean returns</li>
                <li>Causal models hit perfect separation warnings</li>
                <li>No out-of-sample validation yet performed</li>
                <li>Survivorship bias not fully corrected</li>
                <li>Confounding variables (team, tech) not captured</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}
